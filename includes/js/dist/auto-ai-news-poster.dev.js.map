{"version":3,"sources":["auto-ai-news-poster.js"],"names":["jQuery","document","ready","$","console","log","on","additionalInstructions","val","customSourceUrl","postID","button","prop","html","ajax","url","autoAiNewsPosterAjax","ajax_url","method","data","action","post_id","instructions","custom_source_url","security","nonce","success","response","window","location","href","error","xhr","status","responseText","alert","complete","feedbackText","ajaxurl","type","feedback","reload","message","sursaFotoElement","length","text","includes","infoIcon","css","display","width","height","lineHeight","textAlign","backgroundColor","color","borderRadius","fontSize","fontWeight","marginLeft","cursor","attr","tooltip","position","padding","maxWidth","top","offset","left","zIndex","addClass","append","remove"],"mappings":"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","sourcesContent":["jQuery(document).ready(function($) {\n    console.log('S-a incarcat pagina!');\n    $('#get-article-button').on('click', function() {\n        const additionalInstructions = $('#additional-instructions').val();\n        const customSourceUrl = $('#custom-source-url').val();\n        const postID = $('#post_ID').val(); // ID-ul postării curente\n        const button = $(this);\n\n    // Dezactivăm butonul și adăugăm un loader\n    button.prop('disabled', true);\n    button.html('<span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span> Generare...');\n\n\n        console.log('Trimit cererea AJAX...', button);\n        console.log('Instrucțiuni suplimentare:', additionalInstructions);\n        console.log('customSourceUrl:', customSourceUrl);\n        console.log('Post ID:', postID);\n\n        $.ajax({\n            url: autoAiNewsPosterAjax.ajax_url,\n            method: 'POST',\n            data: {\n                action: 'get_article_from_sources',\n                post_id: postID,\n                instructions: additionalInstructions,\n                custom_source_url: customSourceUrl,\n                security: autoAiNewsPosterAjax.nonce\n            },\n            success: function(response) {\n                console.log('Răspuns primit:', response, window.location);\n                if (response.success) {\n                    // alert('Articolul a fost generat și salvat.');\n                    // Facem refresh automat al paginii pentru a vedea modificările\n                    // Redirecționăm către editorul articolului după ce articolul a fost creat/actualizat\n                    window.location.href = '/diswp/wp-admin/post.php?post=' + response.data.post_id + '&action=edit';\n                } else {\n                    // alert('A apărut o eroare: ' + response.data.message);\n                    console.error('Eroare:', response); // Afișăm eroarea completă în consolă\n                }\n            },\n            error: function(xhr, status, error) {\n                console.error('Eroare AJAX:', error);\n                console.error('Răspuns complet AJAX:', xhr.responseText); // Afișăm răspunsul complet din server\n                alert('A apărut o eroare la procesarea cererii.');\n            },\n            complete: function() {\n            // Reactivăm butonul și eliminăm loader-ul\n            button.prop('disabled', false);\n            button.html('Generează articol');\n        }\n        });\n    });\n\n   $('#generate-image-button').on('click', function() {\n    const postID = $('#post_ID').val(); // ID-ul postării curente\n    const button = $(this);\n    const feedbackText = $('#feedback-text').val(); // Feedback-ul din câmpul text\n\n    // Dezactivăm butonul și adăugăm un loader\n    button.prop('disabled', true);\n    button.html('<span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span> Generare...');\n\n    console.log('Trimit cererea AJAX generate_image_for_article ...');\n    console.log('Post ID:', postID);\n     console.log('Feedback:', feedbackText);\n\n    $.ajax({\n        url: ajaxurl,\n        type: 'POST',\n        data: {\n            action: 'generate_image_for_article',\n            post_id: postID,\n            feedback: feedbackText,\n            security: $('#generate_image_nonce').val() // Nonce pentru securitate\n        },\n        success: function (response) {\n            console.log('Răspuns primit:', response);\n            if (response.success) {\n                // Reîncărcăm pagina pentru a vedea imaginea\n                location.reload();\n            } else {\n                 console.log('Răspuns Eroare:', response);\n                alert('Eroare: ' + response.data.message.message);\n            }\n        },\n        error: function () {\n            alert('Eroare ajax.');\n        },\n        complete: function() {\n            // Reactivăm butonul și eliminăm loader-ul\n            button.prop('disabled', false);\n            button.html('Generează imagine');\n        }\n    });\n});\n\n    // Elimin codul pentru trimiterea feedback-ului la imagine, deoarece funcția PHP nu mai există\n\n    // Adaugăm iconița pentru \"Imagine generata AI\"\n    const sursaFotoElement = $('#sursa-foto');\n    console.log(\"sursaFotoElement--->\", sursaFotoElement);\n    if (sursaFotoElement.length && sursaFotoElement.text().includes('Imagine generata AI')) {\n        const infoIcon = $('<span>')\n            .text('i')\n            .css({\n                display: 'inline-block',\n                width: '20px',\n                height: '20px',\n                lineHeight: '20px',\n                textAlign: 'center',\n                backgroundColor: '#0073aa',\n                color: 'white',\n                borderRadius: '50%',\n                fontSize: '14px',\n                fontWeight: 'bold',\n                marginLeft: '10px',\n                cursor: 'pointer'\n            })\n            .attr('title', 'Aceasta imagine a fost generata de AI pe baza textului din rezumat si nu reprezinta realitatea surprinsa prin intermediul unei camere foto.')\n            .on('mouseenter', function() {\n                const tooltip = $('<div>')\n                    .text('Aceasta imagine a fost generata de AI pe baza textului din rezumat si nu reprezinta realitatea surprinsa prin intermediul unei camere foto.')\n                    .css({\n                        position: 'absolute',\n                        backgroundColor: '#333',\n                        color: 'white',\n                        padding: '10px',\n                        borderRadius: '5px',\n                        fontSize: '12px',\n                        maxWidth: '300px',\n                        top: $(this).offset().top + 30,\n                        left: $(this).offset().left,\n                        zIndex: 9999\n                    })\n                    .addClass('info-tooltip');\n                $('body').append(tooltip);\n                $(this).on('mouseleave', function() {\n                    $('.info-tooltip').remove();\n                });\n            });\n\n        sursaFotoElement.append(infoIcon);\n    }\n});\n"],"file":"auto-ai-news-poster.dev.js"}