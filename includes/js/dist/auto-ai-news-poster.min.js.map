{"version":3,"sources":["auto-ai-news-poster.js"],"names":["jQuery","document","ready","$","console","log","on","additionalInstructions","val","customSourceUrl","this","button","html","postID","url","ajax","autoAiNewsPosterAjax","ajax_url","method","action","instructions","custom_source_url","security","nonce","response","window","location","success","href","data","post_id","error","xhr","status","responseText","alert","complete","prop","feedbackText","ajaxurl","type","feedback","reload","message","sursaFotoElement","length","text","includes","infoIcon","css","display","width","height","backgroundColor","textAlign","borderRadius","color","fontSize","fontWeight","marginLeft","tooltip","position","offset","left","padding","maxWidth","top","remove","zIndex","addClass","append"],"mappings":"aAAAA,OAAOC,UAAUC,MAAM,SAASC,GAC5BC,QAAQC,IAAI,wBADhBL,EAAM,uBAAiBM,GAAA,QAAY,WAC/BF,IAAYG,EAAZJ,EAAA,4BAAAK,MACEC,EAA0BN,EAAA,sBAAoBK,MACtCD,EAAAA,EAAAA,YAA2BC,MAC3BC,EAAeN,EAAAO,MAErBC,EAAMA,KAAM,YAEhB,GAEAA,EAAOC,KAAK,uGAGRR,QAAYC,IAAA,yBAA0BM,GACtCP,QAAYC,IAAA,6BAA8BE,GAC1CH,QAAYC,IAAA,mBAAoBI,GAChCL,QAAYC,IAAA,WAAYQ,GAGpBC,EAAGC,KAAEC,CACCF,IAAEE,qBAFLC,SAGGC,OAAA,OACFC,KAAQ,CACDA,OAFL,2BAGFC,QAAcb,EACdc,aAAmBZ,EACXY,kBAAEL,EARXM,SAAAN,qBAAAO,OAWCnB,QAAY,SAAAoB,GAAZpB,QAAQC,IAAI,kBAAmBmB,EAAUC,OAAOC,UACpCF,EAAZG,QAIWD,OAASE,SAAOA,KAAA,iCAA4CC,EAAKC,KAAUA,QAAA,eAG1EC,QAAMA,MAAd,UAFGP,IAKNO,MAAE,SAASC,EAAKC,EAAQF,GACjBA,QAAMA,MAAA,eAAdA,GACQA,QAAMA,MAAA,wBAA6BG,EAAAA,cAC3CC,MAAM,6CAzBPC,SAAA,WA4BHzB,EAAA0B,KAAA,YAAA,GACA1B,EAAAC,KAAY,0BAMpBT,EAAC,0BAA0BG,GAAG,QAAS,WACvC,IAAMO,EAAWV,EAAA,YAAYK,MACvBG,EAASR,EAAEO,MAAXC,EAANR,EAAA,kBAAAK,MAIAG,EAAO0B,KAAK,YAAY,GAAxB1B,EAAO0B,KAAK,uGAGZjC,QAAQC,IAAI,sDACZD,QAAQC,IAAI,WAAYQ,GACvBT,QAAQC,IAAI,YAAaiC,GAGtBxB,EAAAA,KAAKyB,CACLC,IAAMD,QACNV,KAAM,OACFV,KAAM,CACNW,OAASjB,6BACT4B,QAAUH,EACVhB,SAAYgB,EAAZhB,SAAUnB,EAAE,yBAAyBK,OAEzCmB,QAAS,SAAAH,GACLpB,QAAYC,IAAA,kBAAmBmB,GAC3BA,EAASG,QACTD,SAAAgB,UAEGtC,QAAAC,IAAA,kBAAAmB,GACFpB,MAAY,WAAAoB,EAAmBA,KAA/BmB,QAAAA,WAfNZ,MAAA,WAmBEI,MAAE,iBAnBJC,SAAA,WAuBCzB,EAAA0B,KAAA,YAAA,GACA1B,EAAAC,KAAY,0BAUpBR,IAAQC,EAAIF,EAAA,eACZ,GADAC,QAAQC,IAAI,0BAAwBuC,GAChCA,EAAiBC,QAAUD,EAAiBE,OAAOC,SAAS,uBAAwB,CAC9EC,IAAAA,EAAa7C,EAAA,UAGJ2C,KAAE,KACFG,IAAA,CACCC,QAHP,eAISC,MAAE,OACHC,OAAE,OACXC,WAAiB,OACVC,UAPN,SAQDC,gBARC,UASSC,MATT,QAUSD,aAVT,MAWSE,SAXT,OAYOC,WAAA,OAENC,WAAS,OAELC,OAAY,YAIVP,KAAAA,QAAiB,+IACZ/C,GAAE,aAHN,WAIM,IAAEsD,EAJRzD,EAAA,SAKW2C,KAAE,+IACJG,IANT,CAOSY,SAPT,WAQYC,gBARZ,OASaA,MAASC,QACfC,QAAA,OAEFT,aAdd,MAeiBK,SAAjB,OACWK,SAAc,QACnBC,IAAiBC,EAAAA,MAAnBL,SAAAI,IAAA,GADJH,KAAA5D,EAAAO,MAAAoD,SAAAC,KAlCRK,OAAA,OAwCHC,SAAA,gBA9ILlE,EAAA,QAAAmE,OAAAV,GAwIgBzD,EAAEO,MAAMJ,GAAG,aAAc,WACrBH,EAAE,iBAAiBgE,aAI/BvB,EAAiB0B,OAAOtB","file":"auto-ai-news-poster.min.js","sourcesContent":["jQuery(document).ready(function($) {\n    console.log('S-a incarcat pagina!');\n    $('#get-article-button').on('click', function() {\n        const additionalInstructions = $('#additional-instructions').val();\n        const customSourceUrl = $('#custom-source-url').val();\n        const postID = $('#post_ID').val(); // ID-ul postării curente\n        const button = $(this);\n\n    // Dezactivăm butonul și adăugăm un loader\n    button.prop('disabled', true);\n    button.html('<span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span> Generare...');\n\n\n        console.log('Trimit cererea AJAX...', button);\n        console.log('Instrucțiuni suplimentare:', additionalInstructions);\n        console.log('customSourceUrl:', customSourceUrl);\n        console.log('Post ID:', postID);\n\n        $.ajax({\n            url: autoAiNewsPosterAjax.ajax_url,\n            method: 'POST',\n            data: {\n                action: 'get_article_from_sources',\n                post_id: postID,\n                instructions: additionalInstructions,\n                custom_source_url: customSourceUrl,\n                security: autoAiNewsPosterAjax.nonce\n            },\n            success: function(response) {\n                console.log('Răspuns primit:', response, window.location);\n                if (response.success) {\n                    // alert('Articolul a fost generat și salvat.');\n                    // Facem refresh automat al paginii pentru a vedea modificările\n                    // Redirecționăm către editorul articolului după ce articolul a fost creat/actualizat\n                    window.location.href = '/diswp/wp-admin/post.php?post=' + response.data.post_id + '&action=edit';\n                } else {\n                    // alert('A apărut o eroare: ' + response.data.message);\n                    console.error('Eroare:', response); // Afișăm eroarea completă în consolă\n                }\n            },\n            error: function(xhr, status, error) {\n                console.error('Eroare AJAX:', error);\n                console.error('Răspuns complet AJAX:', xhr.responseText); // Afișăm răspunsul complet din server\n                alert('A apărut o eroare la procesarea cererii.');\n            },\n            complete: function() {\n            // Reactivăm butonul și eliminăm loader-ul\n            button.prop('disabled', false);\n            button.html('Generează articol');\n        }\n        });\n    });\n\n   $('#generate-image-button').on('click', function() {\n    const postID = $('#post_ID').val(); // ID-ul postării curente\n    const button = $(this);\n    const feedbackText = $('#feedback-text').val(); // Feedback-ul din câmpul text\n\n    // Dezactivăm butonul și adăugăm un loader\n    button.prop('disabled', true);\n    button.html('<span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span> Generare...');\n\n    console.log('Trimit cererea AJAX generate_image_for_article ...');\n    console.log('Post ID:', postID);\n     console.log('Feedback:', feedbackText);\n\n    $.ajax({\n        url: ajaxurl,\n        type: 'POST',\n        data: {\n            action: 'generate_image_for_article',\n            post_id: postID,\n            feedback: feedbackText,\n            security: $('#generate_image_nonce').val() // Nonce pentru securitate\n        },\n        success: function (response) {\n            console.log('Răspuns primit:', response);\n            if (response.success) {\n                // Reîncărcăm pagina pentru a vedea imaginea\n                location.reload();\n            } else {\n                 console.log('Răspuns Eroare:', response);\n                alert('Eroare: ' + response.data.message.message);\n            }\n        },\n        error: function () {\n            alert('Eroare ajax.');\n        },\n        complete: function() {\n            // Reactivăm butonul și eliminăm loader-ul\n            button.prop('disabled', false);\n            button.html('Generează imagine');\n        }\n    });\n});\n\n    // Elimin codul pentru trimiterea feedback-ului la imagine, deoarece funcția PHP nu mai există\n\n    // Adaugăm iconița pentru \"Imagine generata AI\"\n    const sursaFotoElement = $('#sursa-foto');\n    console.log(\"sursaFotoElement--->\", sursaFotoElement);\n    if (sursaFotoElement.length && sursaFotoElement.text().includes('Imagine generata AI')) {\n        const infoIcon = $('<span>')\n            .text('i')\n            .css({\n                display: 'inline-block',\n                width: '20px',\n                height: '20px',\n                lineHeight: '20px',\n                textAlign: 'center',\n                backgroundColor: '#0073aa',\n                color: 'white',\n                borderRadius: '50%',\n                fontSize: '14px',\n                fontWeight: 'bold',\n                marginLeft: '10px',\n                cursor: 'pointer'\n            })\n            .attr('title', 'Aceasta imagine a fost generata de AI pe baza textului din rezumat si nu reprezinta realitatea surprinsa prin intermediul unei camere foto.')\n            .on('mouseenter', function() {\n                const tooltip = $('<div>')\n                    .text('Aceasta imagine a fost generata de AI pe baza textului din rezumat si nu reprezinta realitatea surprinsa prin intermediul unei camere foto.')\n                    .css({\n                        position: 'absolute',\n                        backgroundColor: '#333',\n                        color: 'white',\n                        padding: '10px',\n                        borderRadius: '5px',\n                        fontSize: '12px',\n                        maxWidth: '300px',\n                        top: $(this).offset().top + 30,\n                        left: $(this).offset().left,\n                        zIndex: 9999\n                    })\n                    .addClass('info-tooltip');\n                $('body').append(tooltip);\n                $(this).on('mouseleave', function() {\n                    $('.info-tooltip').remove();\n                });\n            });\n\n        sursaFotoElement.append(infoIcon);\n    }\n});\n"]}